---
title: "Subnet calculator"
slug: "subnet-calculator"
summary: "Interactive calculator that visualizes subnet configuration."
---

<div class="subnet-calculator">
  <div class="intro">
    The following address ranges are
    <a
      href="https://www.arin.net/reference/research/statistics/address_filters/"
    >reserved for private networks</a>.

    <ul>
      <li><code>10.0.0.0/8</code></li>
      <li><code>172.16.0.0/12</code></li>
      <li><code>192.168.0.0/16</code></li>
    </ul>

    Note that the netmask is different for each one.
    Your netmask must be equal to or larger than
    the base mask of the private network range that you choose to use.
  </div>

  <dl>
    <dt>Input network</dt>
    <dd>
      <div class="ip-input">
        <input placeholder="10.0.0.0/20" value="10.0.0.0/20">
        <div class="buttons">
          <button class="up">&#x25b2;</button>
          <button class="down">&#x25bc;</button>
        </div>
        <span class="input-error"></span>
        <span class="input-warning"></span>
      </div>
    </dd>

    <dt>Address in binary</dt>
    <dd>
      <div class="output address-binary"></div>
      <small>
        <span class="base">Reserved range</span>.
        <span class="net">Network range</span>.
        <span class="host">Host range</span>.
      </small>
    </dd>

    <dt>Netmask in binary IP</dt>
    <dd>
      <div class="output netmask-binary"></div>
    </dd>

    <dt>Netmask in decimal IP</dt>
    <dd>
      <div class="output netmask-decimal"></div>
    </dd>

    <dt>Total number of networks</dt>
    <dd>
      <div class="output total-networks"></div>
    </dd>

    <dt>Total number of hosts per network</dt>
    <dd>
      <div class="output total-hosts"></div>
      <small>
        Note: The first and last host address are reserved for network and broadcast,
        so in practice the actual number is 2 less than what is shown here.
      </small>
    </dd>

    <dt>Example networks</dt>
    <dd>
      <div class="output example-networks"></div>
    </dd>
  </dl>
</div>

<script>
  (function(){
    function dec2bin(dec, padding) {
      return (dec >>> 0).toString(2).padStart(padding, "0");
    }

    function bits2num(size) {
      var result = 0;
      for (var i = 0; i < size; i++) {
        result += 1 << i;
      }
      return result >>> 0;
    }

    function num2ip(number) {
      return (
        ((number >> 24) & 255) + "." +
        ((number >> 16) & 255) + "." +
        ((number >> 8) & 255) + "." +
        ((number >> 0) & 255)
      );
    }

    function inputError(message) {
      $(".input-error").html(message);
    }

    function inputWarning(message) {
      $(".input-warning").html(message);
    }

    function validateInput(value) {
      var regex = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\/\d{1,2}$/;
      if (!regex.test(value)) {
        inputError("Invalid input.");
        return true;
      }
      return false;
    }

    function validateAddr(value) {
      if (value > 255) {
        inputError("Address part cannot be larger than 255.");
        return true;
      }
      return false;
    }

    function validateMask(value) {
      if (value < 1) {
        inputError("Netmask cannot be smaller than 1.");
        return true;
      }
      if (value > 32) {
        inputError("Netmask cannot be larger than 32.");
        return true;
      }
      return false;
    }

    function validateParsed(addr1, addr2, addr3, addr4, mask, priv, base) {
      $(".input-warning").html("");

      if (priv == 0) {
        inputWarning("This is a public range, not a reserved private range!");
      }

      if (priv > 0 && mask < base) {
        inputWarning("Mask is smaller than what the reserved private range allows!");
      }
    }

    var addr = 0;
    var addr1 = 0;
    var addr2 = 0;
    var addr3 = 0;
    var addr4 = 0;
    var mask = 0;
    var base = 8;
    var priv = null;

    function readInput() {
      $(".input-error").html("");

      var value = $(".ip-input input")[0].value;
      var parts = value.split("/");
      var addrParts = parts[0].split(".");
      addr1 = parseInt(addrParts[0]);
      addr2 = parseInt(addrParts[1]);
      addr3 = parseInt(addrParts[2]);
      addr4 = parseInt(addrParts[3]);

      var error = false;
      error ||= validateInput(value);
      error ||= validateAddr(addr1);
      error ||= validateAddr(addr2);
      error ||= validateAddr(addr3);
      error ||= validateAddr(addr4);
      error ||= validateMask(parts[1]);

      if (error) {
        addr = 0;
        mask = 0;
        priv = null;
        return;
      }

      addr = (addr4 << 0) + (addr3 << 8) + (addr2 << 16) + (addr1 << 24);
      mask = parseInt(parts[1]);

      if (addr1 == 10) {
        base = 8;
        priv = 1;
      } else if (addr1 == 172 && addr2 >= 16 && addr2 <= 31) {
        base = 12;
        priv = 2;
      } else if (addr1 == 192 && addr2 == 168) {
        base = 16;
        priv = 3;
      } else {
        base = 0;
        priv = 0;
      }

      validateParsed(addr1, addr2, addr3, addr4, mask, priv, base);
    }

    function renderInput() {
      var value = `${addr1}.${addr2}.${addr3}.${addr4}/${mask}`;
      $(".ip-input input").val(value);
    }

    function renderOutput() {
      $(`.output.address-binary`).html("");

      // Address in binary
      for (var i = 0; i < 32; i++) {
        var value = addr >> i & 1;

        var span = $(`<span>${value}</span>`);

        if (i < (32 - mask)) {
          span.addClass("host");
        } else if (i < (32 - base)) {
          span.addClass("net");
        } else {
          span.addClass("base");
        } 

        $(`.output.address-binary`).prepend(span);

        if (i < 24 && i % 8 == 7) {
          $(`.output.address-binary`).prepend($("<span>.</span>"));
        }
      }

      // Netmask binary
      (function(){
        var value = dec2bin(bits2num(mask) << (32 - mask));
        function insert(s1, s2, position) {
          return s1.substring(0, position) + s2 + s1.substring(position);
        }
        value = insert(value, ".", 24);
        value = insert(value, ".", 16);
        value = insert(value, ".", 8);
        $(".output.netmask-binary").html(value + ` (${mask} bits)`);
      }());

      // Netmask decimal
      (function(){
        var value = num2ip(bits2num(mask) << (32 - mask));
        $(".output.netmask-decimal").html(value + ` (${mask} bits)`);
      }());

      // Total networks
      (function(){
        var bits = mask - base;
        var numNets = bits2num(bits);
        if (numNets != 0) {
          numNets += 1;
        }
        if (priv != 0 && numNets == 0) {
          numNets = 1;
        }
        $(".output.total-networks").html(numNets + ` (${bits} bits)`);
      }());

      // Total hosts
      (function(){
        var bits = 32 - mask;
        var value = bits2num(bits);
        if (value != 0) {
          value += 1;
        }
        $(".output.total-hosts").html(value + ` (${bits} bits)`);
      }());

      // Example networks
      (function(){
        var nets = mask - base;
        var numNets = bits2num(nets);

        function getNetwork(net) {
          var netBin = "";
          var shift = 0;
          if (base > 0) {
            netBin += dec2bin(addr, 32).substring(0, base);
            shift += base;
          }
          if (nets > 0) {
            netBin += dec2bin(net, nets);
            shift += nets;
          }
          return num2ip(parseInt(netBin, 2) << (32 - shift));
        }

        function output(value) {
          $(".output.example-networks").append(getNetwork(value) + "/" + mask + "<br>");
        }

        $(".output.example-networks").html("");
        if (numNets >= 0) { output(0); }
        if (numNets > 1) { output(1); }
        if (numNets > 3) { output(2); }
        if (numNets > 6) { output(3); }
        if (numNets > 7) { $(".output.example-networks").append("...<br>"); }
        if (numNets > 6) { output(numNets - 3); }
        if (numNets > 3) { output(numNets - 2); }
        if (numNets > 1) { output(numNets - 1); }
        if (numNets > 0) { output(numNets - 0); }
      }());
    }

    $(document).ready(function() {
      readInput();
      renderOutput();

      $(".ip-input input").on("keyup change", function(e) {
        readInput();
        renderOutput();
      });
      
      $(".ip-input .buttons .up").on("click", function(e) {
        mask += 1;
        if (mask > 32) {
          mask = 32;
        }
        renderInput();
        readInput();
        renderOutput();
      });

      $(".ip-input .buttons .down").on("click", function(e) {
        mask -= 1;
        if (mask < 1) {
          mask = 1;
        }
        renderInput();
        readInput();
        renderOutput();
      });
    });
  }());
</script>
